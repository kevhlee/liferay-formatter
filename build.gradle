plugins {
    id 'java'
}

group = 'com.liferay'

repositories {
    mavenCentral()
}

dependencies {
    implementation("com.liferay:com.liferay.portal.tools.java.parser:+")
    implementation("com.liferay:com.liferay.petra.lang:2.0.0")
    implementation("com.liferay:com.liferay.petra.string:2.0.0")
    implementation("com.liferay.portal:com.liferay.portal.kernel:+")
    implementation("com.liferay.portal:com.liferay.portal.impl:+")
    implementation("info.picocli:picocli:4.7.6")
}

java {
    sourceCompatibility = "8"
    targetCompatibility = "8"
}

jar {
    duplicatesStrategy = DuplicatesStrategy.EXCLUDE

    exclude("META-INF/*.SF", "META-INF/*.RSA")

    manifest {
        attributes "Main-Class": "com.liferay.formatter.CLI"
    }

    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
}